@page
@model BankStartWeb.Pages.CustomersModel
@{
}

<h1>All Customers</h1>

<form method="GET">
    <label>Search by id</label>
    @*<input asp-for="@Model.SearchId"/>*@
    <input type="submit" value="Search" />
</form>

<form method="GET">
    <label>Search by name</label>
    <input asp-for="@Model.SearchWord"/>
    <input type="submit" value="Search" />
</form>

<table class="table">
    <tr>
        <td>Id
            <a asp-page="/Customers" asp-route-searchWord="@Model.SearchWord" asp-route-col="id" asp-route-order="asc" >
                <i class='bx bx-sort-up'></i></a>
            <a asp-page="/Customers" asp-route-searchWord="@Model.SearchWord" asp-route-col="id" asp-route-order="desc" >
                <i class='bx bx-sort-down' ></i></a>
        </td>
        <td>Given Name
            <a asp-page="/Customers" asp-route-searchWord="@Model.SearchWord" asp-route-col="givenName" asp-route-order="asc" >
                <i class='bx bx-sort-up'></i></a>
            <a asp-page="/Customers" asp-route-searchWord="@Model.SearchWord" asp-route-col="givenName" asp-route-order="desc" >
                <i class='bx bx-sort-down' ></i></a>
        </td>
        <td>Sur Name
            <a asp-page="/Customers" asp-route-searchWord="@Model.SearchWord" asp-route-col="surName" asp-route-order="asc" >
                <i class='bx bx-sort-up'></i></a>
            <a asp-page="/Customers" asp-route-searchWord="@Model.SearchWord" asp-route-col="surName" asp-route-order="desc" >
                <i class='bx bx-sort-down' ></i></a>
        </td>
        <td>Street Address
            <a asp-page="/Customers" asp-route-searchWord="@Model.SearchWord" asp-route-col="streetAddress" asp-route-order="asc" >
                <i class='bx bx-sort-up'></i></a>
            <a asp-page="/Customers" asp-route-searchWord="@Model.SearchWord" asp-route-col="streetAddress" asp-route-order="desc" >
                <i class='bx bx-sort-down' ></i></a>
        </td>
    </tr>
    @foreach(var customer in Model.CustomersList)
    {
        <tr>    
            <td><a asp-route-id="@customer.Id" asp-page="/Customer">@customer.Id</a></td>
             <td>@customer.Givenname</td>
            <td>@customer.Surname</td>
            <td>@customer.Streetaddress</td>
        </tr>
        <td>
            <a asp-page="/Customer" asp-route-Id="@customer.Id">EDIT</a>
        </td>
    }

    <tr>
        <td>
            @if (Model.PageNo > 1)
            {
                <a asp-page="/Customers" asp-route-col="@Model.SortCol" asp-route-order="@Model.SortOrder"  asp-route-searchWord="@Model.SearchWord"   asp-route-pageno="@(Model.PageNo - 1)">Prev</a>
            }
        </td>
        <td> Visar sidan @Model.PageNo av totalt @Model.TotalPageCount  </td>
        <td>
            @if (Model.PageNo < Model.TotalPageCount)
            {
                <a asp-page="/Customers" asp-route-col="@Model.SortCol" asp-route-order="@Model.SortOrder" asp-route-searchWord="@Model.SearchWord" asp-route-pageno="@(Model.PageNo + 1)">Next</a>
            }
        </td>
    </tr>
</table>